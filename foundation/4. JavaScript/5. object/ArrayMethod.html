<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./split-join.js" defer></script>
    <script src="./filter.js" defer></script>
    <script src="./filter_change.js" defer></script>
    <script src="./sort.js" defer></script>
    <script src="./copy-sort.js" defer></script>
    <script src="./extendable_calculator.js" defer></script>
    <script src="./map.js" defer></script>
    <script src="./map-to-object.js" defer></script>
    <script src="./sort-object-in-array.js" defer></script>
    <script src="./shuffle-array.js" defer></script>
    <script src="./reduce-avg-object-in-array.js" defer></script>
    <script src="./unique-array-member.js" defer></script>
    <script src="./reduce-create-obj-from-arr.js" defer></script>

    <style>
      div {
        padding: 20px;
      }
      .container {
        display: grid;
        grid-template: repeat(2, 1fr) / repeat(2, 1fr);
        gap: 20px;
      }
      .left {
        background-color: gainsboro;
        color: gray;
        font-weight: 300;
        font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS",
          sans-serif;
      }

      .left code {
        display: block;
        border: 1px solid gray;
        color: lightslategray;
        font-size: larger;
      }
      .right {
        border: 1px solid rgb(231, 229, 229);
        position: relative;
        color: rgb(95, 95, 95);
        font-size: large;
      }
      .right pre {
        border: 1px solid gray;
      }
      button {
        position: absolute;
        bottom: 2px;
        left: 200px;
      }
      input {
        position: absolute;
        bottom: 2px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="left">
        <h2>Translate border-left-width to borderLeftWidth</h2>
        Write the function camelize(str) that changes dash-separated words like
        “my-short-string” into camel-cased “myShortString”. That is: removes all
        dashes, each word after dash becomes uppercased. Examples:
        <pre>
        <code>
    camelize("background-color") == 'backgroundColor';
    camelize("list-style-image") == 'listStyleImage';
    camelize("-webkit-transition") == 'WebkitTransition';
        </code></pre>
        P.S. Hint: use split to split the string into an array, transform it and
        join back.
      </div>
      <div class="right">
        <pre><code>
    function camelize (str){

        return str.split("-")
        .map((item, index)=>{
            if(index){
                let newItem = item.slice(0,1)
                                .toUpperCase()
                                .concat(item.slice(1));
                return newItem;
            }else{
                return item;
            }})
        .join('');
        }
        </code></pre>

        <input type="text" name="q1" placeholder="输入list-style-image" />
        <button name="q1">answer</button>
      </div>

      <div class="left">
        <h2>Filter range</h2>
        Write a function filterRange(arr, a, b) that gets an array arr, looks
        for elements with values higher or equal to a and lower or equal to b
        and return a result as an array. The function should not modify the
        array. It should return the new array. (不会修改原数组，返回新数组)For
        instance:
        <pre><code>
    let arr = [5, 3, 8, 1];

    let filtered = filterRange(arr, 1, 4);

    alert( filtered ); // 3,1 (matching values)

    alert( arr ); // 5,3,8,1 (not modified)
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    function filterRange(str, a, b){
        return str.filter(item =>{
            if(item >= a && item <= b){
                return true;
            }
        });
    }
        </code></pre>
        <input type="text" name="q2" placeholder="输入1,2,3,4,5,6" />
        <button name="q2">answer</button>
      </div>

      <div class="left">
        <h2>Filter range "in place"</h2>
        Write a function filterRangeInPlace(arr, a, b) that gets an array arr
        and removes from it all values except those that are between a and b.
        The test is: a ≤ arr[i] ≤ b. The function should only modify the array.
        It should not return anything.（会修改原数组，不返回新数组） For
        instance:
        <pre><code>
    let arr = [5, 3, 8, 1];

    filterRangeInPlace(arr, 1, 4); // removed the numbers except from 1 to 4

    alert( arr ); // [3, 1]
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    function filterRangeInPlace(array, a, b){
        for(let i = 0; i < array.length; i++){
            let val = array[i];
            if(val < a || val > b){
                array.splice(i, 1);
                i--;
            }
        }
    }
        </code></pre>
        <input type="text" name="q3" placeholder="输入5,3,8,1" />
        <button name="q3">answer</button>
      </div>

      <div class="left">
        <h2>Sort in decreasing order</h2>
        <pre><code>
    let arr = [5, 2, 1, -10, 8];

    // ... your code to sort it in decreasing order

    alert( arr ); // 8, 5, 2, 1, -10
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    function sort(arr){
        return arr.sort((a, b) => {
            return b - a;
    });}
        </code></pre>
        <input type="text" name="q4" placeholder="输入5,2,1,-10,8" />
        <button name="q4">answer</button>
      </div>

      <div class="left">
        <h2>Copy and sort array</h2>
        We have an array of strings arr. We’d like to have a sorted copy of it,
        but keep arr unmodified. Create a function copySorted(arr) that returns
        such a copy.
        <pre><code>
    let arr = ["HTML", "JavaScript", "CSS"];
    let sorted = copySorted(arr);
    alert( sorted ); // CSS, HTML, JavaScript
    alert( arr ); // HTML, JavaScript, CSS (no changes)
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    function copySorted(arr){
        let newArray = arr.slice(0);
        return newArray.sort();
        //法2：//return arr.toSorted();
    }
        </code></pre>
        <input type="text" name="q5" placeholder="输入HTML, JavaScript, CSS" />
        <button name="q5">answer</button>
      </div>

      <div class="left">
        <h2>Create an extendable calculator</h2>
        <p>
          Create a constructor function Calculator that creates “extendable”
          calculator objects. The task consists of two parts.
        </p>
        <p>
          First, implement the method calculate(str) that takes a string like "1
          + 2" in the format “NUMBER operator NUMBER” (space-delimited) and
          returns the result.Should understand plus + and minus -.
        </p>
        <pre><code>
    let calc = new Calculator;

    alert( calc.calculate("3 + 7") ); // 10
        </code></pre>
        <p>
          Then add the method addMethod(name, func) that teaches the calculator
          a new operation. It takes the operator name and the two-argument
          function func(a,b) that implements it.
        </p>
        <pre><code>
    let powerCalc = new Calculator;
    powerCalc.addMethod("*", (a, b) => a * b);
    powerCalc.addMethod("/", (a, b) => a / b);
    powerCalc.addMethod("**", (a, b) => a ** b);

    let result = powerCalc.calculate("2 ** 3");
    alert( result ); // 8        
        </code></pre>
        <ul>
          <li>No parentheses or complex expressions in this task.</li>
          <li>There may be error handling if you’d like to add it.</li>
          <li>
            The numbers and the operator are delimited with exactly one space.
          </li>
        </ul>
      </div>
      <div class="right">
        <pre><code>
    function Calculator(){
        this.methods = {
            '+': (a, b) => a + b,
            '-': (a, b) => a - b,
        }
        this.calculate = function(str){
            let arr = str.split(' ');
            let num1 = +arr[0];
            let num2 = +arr[2];
            let op = arr[1];
            if(!this.methods[op] || isNaN(num1) || isNaN(num2))return NaN;
            return this.methods[op](num1, num2);
        }
        this.addMethod = function(name,func){
            this.methods[name] = func;
        }
    }            
    let calc = new Calculator;
    let powerCalc = new Calculator;
    powerCalc.addMethod('*', (a, b) => a * b);
    powerCalc.addMethod('/', (a, b) => a / b);
    powerCalc.addMethod('**', (a, b) => a ** b);
        </code></pre>
        <input type="text" name="q6" placeholder="输入3 + 7或2 ** 3" />
        <button name="q6">answer</button>
      </div>

      <div class="left">
        <h2>Map to names</h2>
        You have an array of user objects, each one has user.name. Write the
        code that converts it into an array of names.
        <pre><code>
    let john = { name: "John", age: 25 };
    let pete = { name: "Pete", age: 30 };
    let mary = { name: "Mary", age: 28 };

    let users = [ john, pete, mary ];

    let names = /* ... your code */

    alert( names ); // John, Pete, Mary
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    let john = { name: "John", age: 25 };
    let pete = { name: "Pete", age: 30 };
    let mary = { name: "Mary", age: 28 };            
    let users = [ john, pete, mary ];            
    let names = users.map(item => item.name);
        </code></pre>
        <input type="text" name="q7" disabled />
        <button name="q7">answer</button>
      </div>

      <div class="left">
        <h2>Map to objects</h2>
        You have an array of user objects, each one has name, surname and id.
        Write the code to create another array from it, of objects with id and
        fullName, where fullName is generated from name and surname. For
        instance:
        <pre><code>
    let john = { name: "John", surname: "Smith", id: 1 };
    let pete = { name: "Pete", surname: "Hunt", id: 2 };
    let mary = { name: "Mary", surname: "Key", id:3 };            
    let users = [ john, pete, mary ];            
    let usersMapped = /* ... your code .. */            
    /*
    usersMapped = [
        { fullName: "John Smith", id: 1 },
        { fullName: "Pete Hunt", id: 2 },
        { fullName: "Mary Key", id: 3 }
    ]
  */            
    alert( usersMapped[0].id ) // 1
    alert( usersMapped[0].fullName ) // John Smith
        </code></pre>
        So, actually you need to map one array of objects to another. Try using
        => here. There’s a small catch.
      </div>
      <div class="right">
        <pre><code>
    let johnn = { name: "John", surname: "Smith", id: 1 };
    let peter = { name: "Pete", surname: "Hunt", id: 2 };
    let may = { name: "Mary", surname: "Key", id:3 };            
    let users2 = [ johnn, peter, may ];            
    let usersMapped = users2.map(item => {
        let fullName = `${item.name} ${item.surname}`;
        return {'fullName': fullName, 'id': item.id};
    });
        </code></pre>
        <input type="text" name="q8" disabled />
        <button name="q8">answer</button>
      </div>

      <div class="left">
        <h2>Sort users by age</h2>
        Write the function sortByAge(users) that gets an array of objects with
        the age property and sorts them by age. For instance:
        <pre><code>
    let john = { name: "John", age: 25 };
    let pete = { name: "Pete", age: 30 };
    let mary = { name: "Mary", age: 28 };            
    let arr = [ pete, john, mary ];            
    sortByAge(arr);            
    // now: [john, mary, pete]
    alert(arr[0].name); // John
    alert(arr[1].name); // Mary
    alert(arr[2].name); // Pete
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    function sortByAge(array){
        arr.sort((a, b) => a.age - b.age)
    }
        </code></pre>
        <input type="text" name="q9" disabled />
        <button name="q9">answer</button>
      </div>

      <div class="left">
        <h2>Shuffle an array</h2>
        Write the function shuffle(array) that shuffles (randomly reorders)
        elements of the array. Multiple runs of shuffle may lead to different
        orders of elements. For instance:
        <pre><code>
    let arr = [1, 2, 3];
    shuffle(arr);
    // arr = [3, 2, 1]            
    shuffle(arr);
    // arr = [2, 1, 3]            
    shuffle(arr);
    // arr = [3, 1, 2]
    // ...
        </code></pre>
        All element orders should have an equal probability. For instance,
        [1,2,3] can be reordered as [1,2,3] or [1,3,2] or [3,1,2] etc, with
        equal probability of each case.
      </div>
      <div class="right">
        <pre><code>
    function shufflearray(arr10){
        arr10.sort(() => {
            return Math.random() - 0.5;
        });
    }
        </code></pre>
        <input type="text" name="q10" disabled />
        <button name="q10">answer</button>
      </div>

      <div class="left">
        <h2>Get average age</h2>
        Write the function getAverageAge(users) that gets an array of objects
        with property age and returns the average age. The formula for the
        average is (age1 + age2 + ... + ageN) / N. For instance:
        <pre><code>
    let john = { name: "John", age: 25 };
    let pete = { name: "Pete", age: 30 };
    let mary = { name: "Mary", age: 29 };            
    let arr = [ john, pete, mary ];            
    alert( getAverageAge(arr) ); // (25 + 30 + 29) / 3 = 28
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
    function getAverageAge(arr11){
      return arr11.reduce((sum, current) => 
      sum + current.age, 0) / arr11.length;
  }
        </code></pre>
        <input type="text" name="q11" disabled />
        <button name="q11">answer</button>
      </div>

      <div class="left">
        <h2>Filter unique array members</h2>
        Let arr be an array. Create a function unique(arr) that should return an
        array with unique items of arr. For instance:
        <pre><code>
    function unique(arr) {
    /* your code */              
    }              
    let strings = ["Hare", "Krishna", "Hare", "Krishna",
    "Krishna", "Krishna", "Hare", "Hare", ":-O"              ];              
    alert( unique(strings) ); // Hare, Krishna, :-O
        </code></pre>
      </div>
      <div class="right">
        <pre><code>
  let strings = ["Hare", "Krishna", "Hare", "Krishna",
  "Krishna", "Krishna", "Hare", "Hare", ":-O"];              
  function unique(arr){
    let newArr = [];
    arr.map(item => {
      if(!newArr.includes(item))newArr.push(item);
    })
    return newArr;
  }
        </code></pre>
        <input type="text" name="q12" disabled />
        <button name="q12">answer</button>
      </div>

      <div class="left">
        <h2>Create keyed object from array</h2>
        Let’s say we received an array of users in the form {id:..., name:...,
        age:... }. Create a function groupById(arr) that creates an object from
        it, with id as the key, and array items as values. For example:
        <pre><code>
    let users = [
    {id: 'john', name: "John Smith", age: 20},
    {id: 'ann', name: "Ann Smith", age: 24},
    {id: 'pete', name: "Pete Peterson", age: 31},
    ];          
    let usersById = groupById(users);          
    /*
    // after the call we should have:          
    usersById = {
    john: {id: 'john', name: "John Smith", age: 20},
    ann: {id: 'ann', name: "Ann Smith", age: 24},
    pete: {id: 'pete', name: "Pete Peterson", age: 31},
    }
    */
        </code></pre>
        Such function is really handy when working with server data. In this
        task we assume that id is unique. There may be no two array items with
        the same id. Please use array .reduce method in the solution.
      </div>
      <div class="right">
        <pre><code>
    let users13 = [
    {id: 'john', name: "John Smith", age: 20},
    {id: 'ann', name: "Ann Smith", age: 24},
    {id: 'pete', name: "Pete Peterson", age: 31},
    ];             
  function groupById(arr){
    let obj = {};
    obj = arr.reduce((pre, cur) => {
      // let key = cur.id;
      // pre[`${key}`] = cur;
      pre[cur.id] = cur
      return pre;
    }, {});
    return obj;
  }
        </code></pre>
        <input type="text" name="q13" disabled />
        <button name="q13">answer</button>
      </div>
    </div>
  </body>
</html>
